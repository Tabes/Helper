################################################################################
### Universal Helper Library - Project Configuration
### Central Configuration File for helper Functions and Project Settings
### Provides global Variables, Paths, and default Values
################################################################################
### Project: Universal Helper Library
### Version: 2.1.0
### Author:  Mawage (Development Team)
### Date:    2025-09-02
### License: MIT
### Usage:   Source this File to load Helper Configuration
################################################################################

SCRIPT_VERSION="1.0.0"
COMMIT="Central Project Configuration for Helper Library"

################################################################################
### === GENERAL HELPER VARIABLES === ###
################################################################################

### Position array for formatted output ###
POS=(4 7 21 35 47 62 77 88 99)

### Ruler and scaling for debugging ###
RULER='       10|       20|       30|       40|       50|       60|       70|       80|       90|      100|      110|      120|'
SCALING='123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890'
RULER2='    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :    :'

### Color definitions - can be overridden in project.conf ###
readonly NC="${COLOR_NC:-\033[0m}"
readonly RD="${COLOR_RD:-\033[0;31m}"
readonly GN="${COLOR_GN:-\033[0;32m}"
readonly YE="${COLOR_YE:-\033[1;33m}"
readonly BU="${COLOR_BU:-\033[0;34m}"
readonly CY="${COLOR_CY:-\033[0;36m}"
readonly WH="${COLOR_WH:-\033[1;37m}"
readonly MG="${COLOR_MG:-\033[0;35m}"

### Unicode symbols - can be overridden in project.conf ###
readonly SYMBOL_SUCCESS="${SYMBOL_SUCCESS:-✓}"
readonly SYMBOL_ERROR="${SYMBOL_ERROR:-✗}"
readonly SYMBOL_WARNING="${SYMBOL_WARNING:-⚠}"
readonly SYMBOL_INFO="${SYMBOL_INFO:-ℹ}"

### Interactive Dialog Variables ####
YES=true    ### Can be used to enable additional Package Installation by default ###

################################################################################
### === PATH VARIABLES === ###
################################################################################

### Logging Configuration ###
CENTRAL_LOG="$LOG_DIR/system.log"   ### Optional: Central log for all scripts ###
LOG_LEVEL="INFO"                    ### Log Level ###

WRAPPER_DIR="SCRIPTS_DIR/templates"

SUDOERS_PATH="/etc/sudoers.d"   ### Default Sudoers File Path ###


################################################################################
### === USER & PERMISSIONS === ###
################################################################################

DEFAULT_GROUP_SUFFIX="-admin" ### Default Group Suffix for Secure Function ###


################################################################################
### === SECURITY CONFIGURATION === ###
################################################################################

### Default Sudo Commands for Secure Function ###
DEFAULT_SUDO_COMMANDS="/usr/bin/rsync,/usr/bin/cp,/usr/bin/mv,/usr/bin/mkdir,/usr/bin/rm"


################################################################################
### === GIT REPOSITORY MANAGEMENT === ###
################################################################################

### Workflow scripts ###
GITCLONE_SCRIPT="$WORKFLOW_DIR/gitclone.sh"

### Git repository settings ###
REPO_URL="https://github.com/Tabes/Helper.git"
REPO_BRANCH="main"
REPO_DEVELOP_BRANCH="develop"
REPO_REMOTE_NAME="origin"

### Branch naming conventions ###
FEATURE_BRANCH_PREFIX="feature/"
HOTFIX_BRANCH_PREFIX="hotfix/"
RELEASE_BRANCH_PREFIX="release/"

### Git user settings ###
GIT_USER_NAME="$PROJECT_AUTHOR"
GIT_USER_EMAIL="$PROJECT_EMAIL"


################################################################################
### === VERSION MANAGEMENT === ###
################################################################################

### Versioning settings ###
VERSION_PREFIX="v"
VERSION_FORMAT="MAJOR.MINOR.PATCH"
VERSION_SCHEME="semantic"

### Auto update behavior ###
AUTO_UPDATE_ENABLED="true"
AUTO_UPDATE_GITCLONE="true"
AUTO_UPDATE_BUILDER="false"
CHECK_UPDATE_INTERVAL="300"

### Commit message settings ###
DEFAULT_COMMIT_PREFIX="[AUTO]"
FEATURE_COMMIT_PREFIX="[FEATURE]"
BUGFIX_COMMIT_PREFIX="[BUGFIX]"
RELEASE_COMMIT_PREFIX="[RELEASE]"


################################################################################
### === LOGGING AND MONITORING === ###
################################################################################

### Log settings ###
LOG_LEVEL="INFO"
LOG_FORMAT="timestamp"                  ### default timestamp, iso8601, unix ###
LOG_ROTATION="true"
LOG_MAX_SIZE="100M"
LOG_MAX_FILES="10"


################################################################################
### === LOG FORMATTING CONFIGURATION === ###
################################################################################

### Enable Tab Formatting ###
LOG_USE_TABS=true                     ### Enable/disable Tab Formatting ###

### Tab Positions Array (Column Positions) ###
### Timestamp, Script Name, Log Level, Parameters, Comments, Additional ###
LOG_TAB_POS=(1 25 40 50 62 75)

### Alternative: Use real Tabs instead of Spaces ###
LOG_USE_REAL_TABS=false                   ### Use \t instead of spaces ###


################################################################################
### === VALIDATION AND CHECKS === ###
################################################################################

### Required directories ###
REQUIRED_DIRS=(
    "$PROJECT_ROOT"
    "$CONFIGS_DIR"
    "$WORKFLOW_DIR"
    "$SCRIPTS_DIR"
    "$BACKUP_DIR"
    "$HELP_FILE_DIR"
    "$HELPER_SCRIPTS_DIR"
    "$LOG_DIR"
)

### Required files ###
REQUIRED_FILES=(
    "$GITCLONE_SCRIPT"
    "$WORKFLOW_SCRIPT"
)

### System requirements ###
REQUIRED_COMMANDS=(
    "git"
    "curl"
    "wget"
    "make"
    "gcc"
    "python3"
)

REQUIRED_PACKAGES=(
    "acl" "acl"
    "sudo" "sudo"
    "ssh" "openssh-server, openssh-client"
)

### Minimum disk space (in MB) ###
MIN_DISK_SPACE="5000"
MIN_MEMORY="2000"


################################################################################
### === RUNTIME CONFIGURATION === ###
################################################################################

### Execution settings ###
SCRIPT_TIMEOUT="3600"
MAX_PARALLEL_JOBS="4"
ENABLE_DEBUG_MODE="false"
VERBOSE_OUTPUT="false"

### Security settings ###
REQUIRE_ROOT="true"
ALLOW_UNSAFE_OPERATIONS="false"
VALIDATE_CHECKSUMS="true"


################################################################################
### === INITIALIZATION === ###
################################################################################

### Load project configuration ###
if [ "${BASH_SOURCE[0]}" = "${0}" ]; then
    echo "Project: $PROJECT_NAME v$PROJECT_VERSION"
    echo "Author:  $PROJECT_AUTHOR <$PROJECT_EMAIL>"
    echo "Root:    $PROJECT_ROOT"
    echo "Repository: $REPO_URL"
    echo ""
    echo "Key Paths:"
    echo "  Builder:  $BUILDER_DIR"
    echo "  Configs:  $CONFIGS_DIR" 
    echo "  Workflow: $WORKFLOW_DIR"
    echo "  Scripts:  $SCRIPTS_DIR"
else
    ### Configuration loaded successfully ###
    export PROJECT_CONFIG_LOADED="true"
    export PROJECT_CONFIG_VERSION="$SCRIPT_VERSION"
fi
